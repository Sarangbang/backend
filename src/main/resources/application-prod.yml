server:
  port: ${SERVER_PORT:8080}

spring:
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/sarangbang}
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:1234}
    driver-class-name: com.mysql.cj.jdbc.Driver
  jpa:
    hibernate:
      ddl-auto: ${DB_DDL_AUTO:validate}  # 운영에서는 validate 사용
    show-sql: ${DB_SHOW_SQL:false}       # 운영에서는 SQL 로깅 비활성화
    properties:
      hibernate:
        format_sql: ${DB_FORMAT_SQL:false}
        use_sql_comments: ${DB_USE_SQL_COMMENTS:false}
  data:
    mongodb:
      uri: ${DB_MONGO_URI:mongodb://root:1234@localhost:27017/mongo?authSource=admin}

# 애플리케이션 설정
app:
  storage:
    type: s3

discord:
  webhook:
    url: "${DISCORD_WEBHOOK_URL:discord_webhook_url}"

management:
  endpoints:
    web:
      exposure:
        include: prometheus,health,info   # 필요한 엔드포인트만 노출

  metrics:
    distribution:
      slo:
        '[http.server.requests]': 50ms,100ms,300ms,1s

  observations:
    enable:
      http.server.requests: true      # Observation 별 ON/OFF
